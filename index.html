<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f4f8ff;
}

h2 { margin: 10px; }

#board {
  display: grid;
  justify-content: center;
  margin: 15px auto;
}

.cell {
  width: 60px;
  height: 60px;
  border: 1px solid #aaa;
  background: #e0e7ff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  user-select: none;
}

.cell.open {
  background: #ffffff;
}

.cell.mine {
  background: #ffd6d6;
}

.cell.flag {
  background: #fff3b0;
}

#message {
  font-weight: bold;
  margin-top: 10px;
  font-size: 16px;
}
</style>
</head>
<body>

<h2>ğŸŒŸ Ğ¡Ğ°Ğ¿Ñ‘Ñ€ â€” Ğ·Ğ²ÑƒĞº Ğ›</h2>
<button onclick="startGame()">ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾</button>

<div id="board"></div>
<div id="message"></div>

<script>
const size = 6;
const mines = 6;

const imagesL = ["ğŸŒ™","ğŸ’¡","ğŸ¦","ğŸ¦Š","ğŸš¤","ğŸ¥„","ğŸ§…","ğŸ‹","ğŸƒ","ğŸ€"];

let board = [];
let openedCount = 0;

function startGame() {
  board = [];
  openedCount = 0;
  document.getElementById("message").textContent = "";
  const boardDiv = document.getElementById("board");
  boardDiv.innerHTML = "";
  boardDiv.style.gridTemplateColumns = `repeat(${size}, 60px)`;

  for (let i = 0; i < size * size; i++) {
    board[i] = { mine: false, open: false, flag: false };
  }

  let placed = 0;
  while (placed < mines) {
    let pos = Math.floor(Math.random() * size * size);
    if (!board[pos].mine) {
      board[pos].mine = true;
      placed++;
    }
  }

  for (let i = 0; i < size * size; i++) {
    const cell = document.createElement("div");
    cell.classList.add("cell");
    cell.dataset.index = i;
    cell.addEventListener("click", openCell);
    cell.addEventListener("contextmenu", toggleFlag);
    boardDiv.appendChild(cell);
  }
}

function openCell(e) {
  const index = parseInt(e.target.dataset.index);
  const cell = board[index];
  if (cell.open || cell.flag) return;

  cell.open = true;
  e.target.classList.add("open");

  if (cell.mine) {
    e.target.textContent = "ğŸ’¥";
    e.target.classList.add("mine");
    document.getElementById("message").textContent = "ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ·!";
    revealMines();
    return;
  }

  const randomImage = imagesL[Math.floor(Math.random() * imagesL.length)];
  e.target.textContent = randomImage;

  openedCount++;
  checkWin();
}

function toggleFlag(e) {
  e.preventDefault();
  const index = parseInt(e.target.dataset.index);
  const cell = board[index];
  if (cell.open) return;

  cell.flag = !cell.flag;
  e.target.textContent = cell.flag ? "ğŸš©" : "";
  e.target.classList.toggle("flag");
}

function revealMines() {
  document.querySelectorAll(".cell").forEach((cellDiv, i) => {
    if (board[i].mine) {
      cellDiv.textContent = "ğŸ’£";
      cellDiv.classList.add("mine");
    }
  });
}

function checkWin() {
  if (openedCount === size * size - mines) {
    document.getElementById("message").textContent = "ğŸ‰ ĞœĞ¾Ğ»Ğ¾Ğ´ĞµÑ†! Ğ¢Ñ‹ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ» Ğ²ÑĞµ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ¸ Ğ½Ğ° Ğ›!";
  }
}

startGame();
</script>

</body>
</html>
